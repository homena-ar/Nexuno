<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1d653f">
    <meta name="description" content="Navegador GPS del Barrio Altos de Podestá - Encontrá rutas entre manzanas y casas">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <title>GPS Altos de Podestá</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="assets/icon.svg">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header__logo">
            <svg class="header__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
                <circle cx="12" cy="9" r="2.5"/>
            </svg>
            <span>Altos de Podestá</span>
        </div>
        <button type="button" class="header__menu" id="menuBtn" aria-label="Menú">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </header>

    <!-- Panel de navegación -->
    <nav class="nav-panel" id="navPanel">
        <!-- Origen -->
        <section class="nav-section">
            <div class="nav-section__header">
                <span class="badge badge--origin">A</span>
                <h2>Origen</h2>
            </div>
            
            <div class="input-group">
                <div class="input-field">
                    <label for="origenM">Manzana</label>
                    <input type="text" id="origenM" inputmode="numeric" pattern="[0-9]*" placeholder="--" maxlength="2" autocomplete="off">
                </div>
                <div class="input-field">
                    <label for="origenC">Casa</label>
                    <input type="text" id="origenC" inputmode="numeric" pattern="[0-9]*" placeholder="--" maxlength="2" autocomplete="off">
                </div>
                <div class="selected-tag" id="origenTag">
                    <span>Sin seleccionar</span>
                </div>
            </div>
            
            <div class="quick-actions">
                <button type="button" class="chip" data-action="origen-florida">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M2 12h20"/></svg>
                    Florida
                </button>
                <button type="button" class="chip" data-action="origen-principal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M2 12h20"/></svg>
                    Principal
                </button>
                <button type="button" class="chip" data-action="origen-gps" id="gpsBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 2v4M12 18v4M2 12h4M18 12h4"/></svg>
                    GPS
                </button>
                <span class="gps-status" id="gpsStatus">GPS inactivo</span>
            </div>
        </section>

        <!-- Destino -->
        <section class="nav-section">
            <div class="nav-section__header">
                <span class="badge badge--dest">B</span>
                <h2>Destino</h2>
            </div>
            
            <div class="input-group">
                <div class="input-field">
                    <label for="destinoM">Manzana</label>
                    <input type="text" id="destinoM" inputmode="numeric" pattern="[0-9]*" placeholder="--" maxlength="2" autocomplete="off">
                </div>
                <div class="input-field">
                    <label for="destinoC">Casa</label>
                    <input type="text" id="destinoC" inputmode="numeric" pattern="[0-9]*" placeholder="--" maxlength="2" autocomplete="off">
                </div>
                <div class="selected-tag selected-tag--dest" id="destinoTag">
                    <span>Sin seleccionar</span>
                </div>
            </div>
        </section>

        <!-- Acciones -->
        <div class="nav-actions">
            <button type="button" class="btn btn--primary" id="calcularBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/></svg>
                Calcular ruta
            </button>
            <button type="button" class="btn btn--secondary" id="limpiarBtn" aria-label="Limpiar ruta y selección">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
        </div>

        <!-- Info de ruta -->
        <div class="route-info" id="routeInfo">
            <div class="route-info__path">
                <span id="routeFrom">--</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                <span id="routeTo">--</span>
            </div>
            <div class="route-info__distance" id="routeDist">-- m</div>
        </div>
    </nav>

    <!-- Mapa -->
    <main class="map-container" id="mapContainer">
        <div class="map" id="map">
            <!-- El mapa se genera con JS -->
        </div>
        
        <!-- Controles de zoom -->
        <div class="map-controls">
            <button type="button" class="map-control" id="zoomInBtn" aria-label="Acercar">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
            </button>
            <button type="button" class="map-control" id="zoomOutBtn" aria-label="Alejar">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/></svg>
            </button>
            <button type="button" class="map-control" id="centerBtn" aria-label="Centrar">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 2v4M12 18v4M2 12h4M18 12h4"/></svg>
            </button>
            <button type="button" class="map-control" id="centerGpsBtn" aria-label="Centrar en GPS">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3v3M12 18v3M3 12h3M18 12h3"/><circle cx="12" cy="12" r="4"/></svg>
            </button>
        </div>
    </main>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <div class="modal__header">
                <h3 id="modalTitle">Manzana <span id="modalManzana">--</span></h3>
                <span class="modal__subtitle"><span id="modalCasas">--</span> casas</span>
            </div>
            
            <div class="modal__body">
                <div class="input-field input-field--large">
                    <label for="modalCasa">Número de casa (opcional)</label>
                    <input type="number" id="modalCasa" min="1" step="1" inputmode="numeric" placeholder="Ej: 15" autocomplete="off">
                </div>
            </div>
            
            <div class="modal__actions">
                <button type="button" class="btn btn--origin-modal" id="modalOrigenBtn">
                    <span class="badge badge--origin badge--small">A</span>
                    Origen
                </button>
                <button type="button" class="btn btn--dest-modal" id="modalDestinoBtn">
                    <span class="badge badge--dest badge--small">B</span>
                    Destino
                </button>
            </div>
            
            <button type="button" class="modal__close" id="modalCloseBtn" aria-label="Cerrar">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 18L18 6M6 6l12 12"/></svg>
            </button>
        </div>
    </div>

    <!-- Toast notifications -->
    <div class="toast-container" id="toastContainer" aria-live="polite" aria-atomic="true"></div>

    <!-- Scripts -->
    <script src="js/data.js"></script>
    <script src="js/map.js"></script>
    <script src="js/router.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
